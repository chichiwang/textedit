(function(d){var a,c=false,e=0;var b={closedMenuClass:"menuClosed",openMenuClass:"menuOpen",selectedClass:"selected",init:function(g){var j=this,i=d.extend({menuTargets:undefined,flagSelected:true,toggleOpenClose:true},g);
this.data("popout",i);if(e===0){(function(){d(document).bind("mousedown.popout",function(){c=true;}).bind("mouseup.popout",function(){c=false;});})();}e+=1;
function f(){var k=this.children("menu").length?this.children("menu"):this.children("section"),l="."+b.openMenuClass;function m(){if(d(l).length){d(l).each(function(){b.closeMenu.apply(d(this),[true]);
});}}if(!("ontouchstart" in document.documentElement)){this.bind("mouseover.popout",function(){if(!c){m();b.openMenu.apply(k);}}).bind("mouseout.popout",function(){b.closeMenu.apply(k);
}).bind("click.popout",function(){if(k.hasClass(b.openMenuClass)){b.closeMenu.apply(k,[true]);}});}else{this.bind("click.popout",function(){if(k.hasClass(b.openMenuClass)){b.closeMenu.apply(k,[true]);
}else{m();b.openMenu.apply(k);}});}}if(i.toggleOpenClose){f.apply(this);}if(i.menuTargets||(i.flagSelected===true)){function h(){if(i.flagSelected===true){d(this).parent("menu").children("li").each(function(){if(d(this).hasClass(b.selectedClass)){d(this).removeClass(b.selectedClass);
}});}if(i.menuTargets){b.applyClassToTargets.apply(this,[i.menuTargets]);}if(i.flagSelected===true){d(this).addClass(b.selectedClass);}}this.children("menu").children("li").bind("click.popout",function(){h.apply(this);
});}},destroy:function(){this.removeData("popout");this.unbind(".popout");this.children("menu").children("li").unbind(".popout");if(e===1){d(document).unbind(".popout");
}e-=1;},openMenu:function(){window.clearTimeout(a);this.removeClass(b.closedMenuClass).addClass(b.openMenuClass);},closeMenu:function(f){window.clearTimeout(a);
if(!f){var g=this;a=window.setTimeout(function(){g.removeClass(b.openMenuClass).addClass(b.closedMenuClass);},500);}else{this.removeClass(b.openMenuClass).addClass(b.closedMenuClass);
}},applyClassToTargets:function(h){var m=d(h),g=[],n=d(this).attr("class"),f=d(this).parent("menu"),l=f.children("li").length;function j(i){d.each(g,function(o,p){if(d(i).hasClass(p)){d(i).removeClass(p);
}});}for(var k=0;k<l;k++){g[k]=f.children("li:eq("+k+")").attr("class");}m.each(function(){j(this);d(this).addClass(n);});},changeSelectedListItem:function(f){if(!(f instanceof jQuery)){f=d(f);
}f.addClass(b.selectedClass);}};d.fn.popout=function(g){var f=arguments;return this.each(function(){that=d(this);if(b[g]){return b[g].apply(that,Array.prototype.slice.call(f,1));
}else{if(typeof g==="object"||!g){if(!that.data("popout")){that.data("popout",true);return b.init.apply(that,f);}d.error("Popout Menu already initialized on this element (#"+that.attr("id")+") !");
}else{d.error("Method "+g+" does not exist on jQuery.popout");}}});};})(jQuery);(function(b){var a={init:function(o){var g=b.extend({inputEl:"#inputEl",outputEl:"#outputEl",toggleEls:undefined,triggerEls:undefined,inputAutoGrow:false,defaultContent:false,bindButton:true,placeholderFix:false},o);
this.data("editTextButton",g);var j=b(g.inputEl),m=b(g.outputEl),f=this;if(g.toggleEls){var h="";for(var l in g.toggleEls){h=h+", "+l;}h=b(h.slice(2));
}function i(q){var p={lessThan:"<",greaterThan:">",space:" ",ampersand:"&",breakTag:"\r\n"};q=(q+"").replace(/(<br\s*\/?>\s*)/gi,p.breakTag);q=(q+"").replace(/&lt;/g,p.lessThan);
q=(q+"").replace(/&gt;/g,p.greaterThan);q=(q+"").replace(/&nbsp;/g,p.space);return(q+"").replace(/&amp;/g,p.ampersand);}function e(){var p=j.attr("placeholder");
function q(){var r=document.createElement("input");return("placeholder" in r);}if(!q()){(function(){j.bind("focus.editTextButton",function(){if(j.val()==p){j.val("");
}}).bind("blur.editTextButton",function(){if(j.val()==""){j.val(p);}});})();}}function n(){if(g.inputAutoGrow===true){var s=j,x=s.height(),v=s.css("lineHeight"),t="keyup.editTextButton keydown.editTextButton",u="keyup.editTextButton";
var w=b("<div></div>").css({position:"absolute",top:-10000,left:-10000,width:b(this).width()-parseInt(s.css("paddingLeft"))-parseInt(s.css("paddingRight")),fontSize:s.css("fontSize"),fontFamily:s.css("fontFamily"),lineHeight:s.css("lineHeight"),resize:"none"}).appendTo(document.body);
}else{var t="blur.editTextButton",u="blur.editTextButton";}function r(){q.apply(this);if(g.inputAutoGrow===true){p.apply(s);}}function p(){var z=function(A,D){for(var B=0,C="";
B<D;B++){C+=A;}return C;};var y=""+this.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(A){return z("&nbsp;",A.length-1)+" ";
});w.html(y);b(this).css("height",Math.max(w.height(),x));}function q(){var A=z(b(this).val()),y=b(this).attr("placeholder");function z(C){var B={lessThan:"&lt;",greaterThan:"&gt;",space:"&nbsp;",ampersand:"&amp;",breakTag:"<br />"};
C=(C+"").replace(/&/g,B.ampersand);C=(C+"").replace(/</g,B.lessThan);C=(C+"").replace(/>/g,B.greaterThan);C=(C+"").replace(/ /g,B.space);return(C+"").replace(/(\r\n|\n\r|\r|\n)/g,B.breakTag);
}if(b(this).val()===y){A="";}m.html(A);}j.bind(t,r);j.trigger(u);}function c(){function p(){if(h){h.toggle();}else{j.toggle();m.toggle();}}f.bind("click.editTextButton",function(){p();
return false;});}function k(){this.bind("click.editTextButton",function(){for(var p in g.toggleEls){b(" "+p).toggle(g.toggleEls[""+p]);}});}if(g.defaultContent===true){j.val(i(b(g.outputEl).html()));
}if(g.placeholderFix===true){e();}n();if(g.bindButton){c();}if(g.triggerEls){var d=b(""+g.triggerEls);d.each(function(){k.apply(b(this));});}},destroy:function(){var c=this.data("editTextButton"),d=c.inputEl;
d.unbind(".editTextButton");this.unbind(".editTextButton");this.removeData("editTextButton");}};b.fn.editTextButton=function(d){var c=arguments;return this.each(function(){that=b(this);
if(a[d]){return a[d].apply(that,Array.prototype.slice.call(c,1));}else{if(typeof d==="object"||!d){if(!that.data("editTextButton")){that.data("editTextButton",true);
return a.init.apply(that,c);}b.error("editTextButton already initialized on this element (#"+that.attr("id")+") !");}else{b.error("Method "+d+" does not exist on jQuery.editTextButton");
}}});};})(jQuery);$(document).ready(function(){var f,j=false,b=screen.width,e=false;$("#mobileInputFeed textarea").focus(function(){j=true;}).blur(function(){j=false;
});var l=false,c=navigator.platform;if(c==="iPad"||c==="iPhone"||c==="iPod"){l=true;}var n,g=$(window).height(),k=$(window).width();function d(q){var r=$(window).height,p=$(window).width;
if((r!=g)&&(p!=k)){window.clearTimeout(n);n=window.setTimeout(q,10);g=$(window).height();k=$(window).width();}}function i(s,p){if(!(typeof(s)=="number")){p=s;
s=1;}var r=[];function q(v,t){t.length=v.length;for(var u=0;u<v.length;u++){t[u]=v[u];}}q(p,r);return r.slice(s,r.length);}function m(t){var r=$(t+" .slider"),p=$(t).children("section"),q=i(arguments);
function s(v,u){$.each(q,function(){var y=u.value,w=""+this;if($(w).hasClass("popMenu")){$(w).children("p").html(y);}else{var x="font-size: "+y+"px !important;";
$(w).attr("style",x);}});}if("ontouchstart" in document.documentElement){r.slider({min:12,max:24});r.bind("slide slidechange",s);r.slider("option","value",14);
}else{r.slider({min:16,max:34});r.bind("slide slidechange",s);r.slider("option","value",18);}}function o(x){var q=$.extend({menuBarEl:"#mobileMenuBar",inputContainer:"#mobileInputFeed",buttonEl:"#mobileTextButton",confirmButton:"#deleteTextButton",confirmEl:"#deleteConfirmation",pageOutputEl:"#outputFeed>p",confirmDelete:"#yesDelete",cancelDelete:"#noDelete"},x);
var u,t=$(q.confirmEl+" p"),p=$(q.inputContainer+" textarea"),v=t.html();function r(){if(j){return true;}u=window.innerHeight-$(q.menuBarEl).outerHeight();
p.css("height",$(q.inputContainer).height()-80);if(!e){$(q.inputContainer).toggle(false).css({top:"",bottom:(0-window.innerHeight)});$(q.menuBarEl).css({top:"",bottom:0});
$("#page-wrap").css({visibility:""});}else{$(q.menuBarEl).css({top:0,bottom:""});$(q.inputContainer).toggle(true).css({top:0,bottom:""});$("#page-wrap").css({visibility:"hidden"});
}}function w(){if(e){$("#page-wrap").css({visibility:""});$(q.menuBarEl).css({top:"",bottom:u}).animate({bottom:0},{queue:false,duration:800});$(q.inputContainer).css({top:0,bottom:""}).animate({top:u},{queue:false,duration:800,complete:function(){$(q.inputContainer).toggle(false).css({top:"",bottom:(0-window.innerHeight)});
}});e=false;}else{$(q.menuBarEl).css({top:"",bottom:0}).animate({bottom:u},{queue:false,duration:800,complete:function(){$(q.menuBarEl).css({top:0,bottom:""});
}});$(q.inputContainer).toggle(true).css({top:u,bottom:""}).animate({top:0},{queue:false,duration:800,complete:function(){$(q.inputContainer).toggle(true).css({top:0,bottom:""});
$(q.inputContainer).css({top:0,bottom:""});$("#page-wrap").css({visibility:"hidden"});p.trigger("blur");$(window).trigger("resize");}});e=true;}}function s(){$(q.confirmEl).toggle(false);
$(q.confirmButton).bind("click.mobileTextMenu",function(){if(p.val()===""){t.html("There is no text!");$(q.confirmDelete).html("OK").css({"margin-right":"auto","margin-left":"auto",width:"60%","float":"none"});
$(q.cancelDelete).css("visibility","hidden");}$(q.confirmEl).toggle(true);});$(q.confirmDelete).bind("click.mobileTextMenu",function(){p.val("");p.trigger("blur.editTextButton");
t.html(v);$(q.confirmDelete).html("Confirm").css({"margin-right":"","margin-left":"",width:"","float":""});$(q.cancelDelete).css("visibility","");$(q.confirmEl).toggle(false);
});$(q.cancelDelete).bind("click.mobileTextMenu",function(){$(q.confirmEl).toggle(false);});}$(window).load(r);if(l){$(window).scroll(function(){if(!j){r();
}}).resize(function(){if(!j){d(r);}});p.bind("ontouchmove",function(y){y.stopPropagation();});}$(q.buttonEl).bind("click.mobileTextMenu",function(){w();
});$(q.buttonEl).editTextButton({inputEl:q.inputContainer+" textarea",outputEl:q.pageOutputEl,bindButton:false,defaultContent:true});s();}function h(q){var s=$.extend({settingsButton:"#mobileSettingsButton",settingsMenu:"#mobileSettings"},q);
var r=$(s.settingsMenu),t=$(s.settingsButton);function u(){$("#page-wrap").css({visibility:""});$("#mobileMenuBar").css({top:"",bottom:0});$("#mobileInputFeed").toggle(false).css({top:"",bottom:(0-window.innerHeight)});
e=false;}t.bind("click.mobileSettings",function(v){if(e){r.toggleClass("menuOpenTop menuClosed");}else{r.toggleClass("menuOpen menuClosed");}v.stopPropagation();
});function p(){r.toggleClass("menuOpen",false).toggleClass("menuOpenTop",false).toggleClass("menuClosed",true);}$("html").bind("click ontouchstart ontouchmove",p);
$("#page-wrap").bind("click",p);$(window).bind("scroll",p);$(".fontSelect").bind("click.mobileSettings",function(){u();$("#fontSelect menu").switchClass("menuClosed","menuOpen",500);
});$("#fontSelect menu li").bind("click.mobileSettings",function(){$("#fontSelect menu").switchClass("menuOpen","menuClosed",800);});$(".colorSelect").bind("click.mobileSettings",function(){u();
$("#colorSelect menu").switchClass("menuClosed","menuOpen",500);});$("#colorSelect menu li").bind("click.mobileSettings",function(){$("#colorSelect menu").switchClass("menuOpen","menuClosed",800);
});$(".fontSizer").bind("click.mobileSettings",function(){u();$("#fontSizer section").switchClass("menuClosed","menuOpen",500);});$("#fontSizeDone").bind("click.mobileSettings",function(){$("#fontSizer section").switchClass("menuOpen","menuClosed",800);
});}function a(s){var u=$.extend({minSize:12,maxSize:24,upArrow:"#fontUp",downArrow:"#fontDown",fontIndicator:"#currentFontSize",target:"#outputFeed p"},s);
var q=$(u.upArrow),v=$(u.downArrow),t=$(u.fontIndicator),p=$(u.target);var r=parseInt(t.html());p.css("font-size",r);q.bind("click.mobileFont",function(){r=parseInt(t.html());
if(r<u.maxSize){r+=1;p.css("font-size",r);t.html(r+"px");}});v.bind("click.mobileFont",function(){r=parseInt(t.html());if(r>u.minSize){r-=1;p.css("font-size",r);
t.html(r+"px");}});}$("html").removeClass("no-js");if((b<=1024)&&("ontouchstart" in document.documentElement)){$("body").append('<link href="assets/css/mobile.min.css" rel="stylesheet" type="text/css">');
o();$("#colorSelect").popout({menuTargets:"#outputFeed>p, #colorSelect, #fontSelect>menu",toggleOpenClose:false});$("#fontSelect").popout({menuTargets:"#outputFeed>p",toggleOpenClose:false});
h();a();}else{$("#fontSlide").html("");m("#fontSizer","#fontSizer","#outputFeed>p");$("#fontSlide").bind("slidechange",function(){$("#fontSlide a").trigger("click");
});$("#colorSelect").popout({menuTargets:"#outputFeed>p, #colorSelect, #fontSelect>menu"});$("#fontSelect").popout({menuTargets:"#outputFeed>p"});$("#fontSizer").popout({flagSelected:false});
$("#inputText_toggle").editTextButton({inputEl:"#inputFeed textarea",outputEl:"#outputFeed>p",toggleEls:{"#inputFeed":false,"#outputFeed>p":true},triggerEls:"#output .popMenu",inputAutoGrow:true,defaultContent:true,placeholderFix:true});
$("#mobileMenuBar").remove();$("#mobileInputFeed").remove();$("#deleteConfirmation").remove();}$("#bgcSelect").popout({flagSelected:false,menuTargets:"#outputFeed, .buttonTab, header",toggleOpenClose:false});
});